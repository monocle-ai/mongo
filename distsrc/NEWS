tokumx news
===========

tokumx 1.0.0-rc.0
-----------------
Release date: TBD

General
~~~~~~~

    - The major developments in this release are replication and sharding.


New features and improvements
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

    - Replication and sharding are now supported for evaluation.

    - Sharding on a hashed key is supported (backported from 2.4).

    - Sharding creates clustering indexes by default, which is a
      significant performance advantage in most cases.  If you need to
      shard on a non-clustering index, you need to specify that in
      sh.shardCollection(), for example

          sh.shardCollection("test.foo",
                             {x: 1},
                             false, // unique
                             false  // clustering
                             );

      - The JS client driver now supports the clustering flag in
        sh.shardCollection, which should only be used if you want to
        specify that you want to shard on a NON-clustering index (set it
        to false).  See above.

    - "DDL" changes (create, drop, ensureIndex, dropIndexes, rename) are
      now supported inside multi-statement transactions, and are properly
      rolled back on rollbackTransaction.

    - The C++ client driver now supports clustering indexes.  This changes
      the function signature for DBClientWithCommands::ensureIndex, please
      check your applications in light of this API change.

    - The C++ client driver has a convenience class for multi-statement
      transactions: RemoteTransaction.  Please check its documentation.


Limitations
~~~~~~~~~~~

    - The format of the local.oplog.rs collection has changed and will
      break any applications that were relying on it.

    - On a replica set, large transactions can fail if a transaction is
      too large (due to a limit on the size of a BSON object).  This
      should not be a worry for existing applications, but some commands
      (copydb, clone, cloneCollection), as well as updates that affect a
      large number of documents (and specify {multi: true}).  This will be
      fixed soon, but for now, avoid such operations if you are using
      replication.

    - The commands aggregate and mapReduce may have poor concurrency with
      some workloads.  This will be fixed soon, and these commands should
      be able to be run concurrently with each other and with other
      operations.

    - Multi-statement transactions are not supported in a sharded cluster,
      and will be rejected by mongos.

    - Calls to db.eval() are not properly profiled when profiling is
      enabled.  The cause for this is not understood.


tokumx 0.1.0
------------
Release date: 2013-04-15

General
~~~~~~~

    - This release highlights single-threaded and multi-threaded
      performance improvements.


New features and improvements
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

    - Concurrency: inserts, updates, and deletes into existing collections
      are now concurrent operations, with each other and with read
      operations. (trac #6019)

    - Multi-statement transactions: clients may now issue
      `beginTransaction`, `commitTransaction`, and `rollbackTransaction`
      commands using the `runCommand` interface, to bundle multiple
      individual statements together in the same system transaction.

    - The key format used in vanilla MongoDB's `{v:1}` indexes is now used
      in the Fractal Tree storage system.  This yields significant
      performance gains, particularly for in-memory workloads.

    - Capped collections and tailable cursors are now supported for
      experimental use only.

    - The `renameCollection` command is now supported.

    - The system allocator has been changed fully to jemalloc.


tokumx 0.0.4
------------
Release date: 2013-04-08

New features and improvements
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

    - Server crashes now produce a core file. (trac #6458)

    - Debug info is available in a separate package. (trac #6453)


Bug Fixes
~~~~~~~~~

    - The gcc and stdc++ runtime libraries are now packaged with the
      binaries to fix runtime issues on older Centos 5 machines. (trac
      #6456)


tokumx 0.0.2
------------
Release date: 2013-03-14

General
~~~~~~~

    - First evaluation release.
